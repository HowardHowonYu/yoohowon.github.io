angular.module("DanialGithubPage.Main").directive("portfolio",["$timeout","$location","$window","portfolioFactory","$rootScope","loadingViewService",function(o,t,i,e,n,l){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"public/html/portfolio.html",link:function(t,l,r,c){function h(){section_width=$(".section--box")[0].clientWidth,section_height=$(".section--box")[0].clientHeight,portfolio_ul_width=$(".portfolio--ul")[0].clientWidth,portfolio_ul_height=$(".portfolio--ul")[0].clientHeight,t.showcaseWidthStyle={width:portfolio_ul_width+5+"px",height:portfolio_ul_height-20+"px"},t.descriptionHeight=portfolio_ul_height-40+"px",t.closeBtnPosition={right:(section_width-portfolio_ul_width)/2-15+"px",top:"0px"},section_width>800?t.firstColumnMarginLeft="77.5px":section_width>645?t.firstColumnMarginLeft=(section_width-645)/2+"px":t.firstColumnMarginLeft=""}function s(){var o=i.innerWidth,e=300;t.portfolioWrapHeight={height:i.innerHeight-156+"px"},o>900?t.portfolioColStyle={width:3*e+"px"}:o>600?t.portfolioColStyle={width:2*e+"px"}:t.portfolioColStyle={width:1*e+"px"}}n.showNotebookUrl=!1,n.notebookUrl="",e.getPortfolios().then(function(o){t.portfolios=e.csvToJSON(o.data)},function(o){console.log("Occured error.")}),h(),s(),t.$watch("portfolio",function(o,t){h()}),angular.element(i).bind("resize",function(){h(),s(),t.$digest()}),t.clickPortfolio=function(i){"0px"==t.showcaseWidthStyle.height&&h(),t.showPortfolioDetail=!0,t.contents={},angular.copy(t.portfolios[i],t.contents),o(function(){t.isContentsReady=!0},500)},t.closeShowcase=function(){t.isContentsReady=!1,t.showPortfolioDetail=!1,t.contents.video_url="",o(function(){t.contents={}},500)},t.clickShowNotebookBtn=function(o){n.showNotebookUrl=!0,n.notebookUrl=o},n.closeNotebookShowcase=function(){n.showNotebookUrl=!1,n.notebookUrl=""}}}}]);